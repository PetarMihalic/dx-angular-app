<div *ngIf="formShow; else NoTicketSelected">
	<form action="x" method="post" (submit)="onFormSubmit($event)">
		<dx-form id="form" [formData]="formData">
			<!-- 
                https://supportcenter.devexpress.com/ticket/details/t724489/html-editor-in-dx-form
                https://js.devexpress.com/Documentation/ApiReference/UI_Components/dxForm/Item_Types/SimpleItem/#template 
            -->
            <dxi-item>
                <div *dxTemplate>

                    <dx-html-editor height="250px" [(value)]="formData.content">
                        <dxo-toolbar [multiline]="true">
                            <dxi-item name="undo"></dxi-item>
                            <dxi-item name="redo"></dxi-item>
                            <dxi-item name="separator"></dxi-item>
                            <dxi-item
                                name="size"
                                [acceptedValues]="['8pt', '10pt', '12pt', '14pt', '18pt', '24pt', '36pt']"
                                [options]="{ inputAttr: { 'aria-label': 'Font size' } }"
                            ></dxi-item>
                            <dxi-item
                                name="font"
                                [acceptedValues]="[
                                    'Arial',
                                    'Courier New',
                                    'Georgia',
                                    'Impact',
                                    'Lucida Console',
                                    'Tahoma',
                                    'Times New Roman',
                                    'Verdana'
                                ]"
                                [options]="{ inputAttr: { 'aria-label': 'Font family' } }"
                            ></dxi-item>
                            <dxi-item name="separator"></dxi-item>
                            <dxi-item name="bold"></dxi-item>
                            <dxi-item name="italic"></dxi-item>
                            <dxi-item name="strike"></dxi-item>
                            <dxi-item name="underline"></dxi-item>
                            <dxi-item name="separator"></dxi-item>
                            <dxi-item name="alignLeft"></dxi-item>
                            <dxi-item name="alignCenter"></dxi-item>
                            <dxi-item name="alignRight"></dxi-item>
                            <dxi-item name="alignJustify"></dxi-item>
                            <dxi-item name="separator"></dxi-item>
                            <dxi-item name="orderedList"></dxi-item>
                            <dxi-item name="bulletList"></dxi-item>
                            <dxi-item name="separator"></dxi-item>
                            <dxi-item
                                name="header"
                                [acceptedValues]="[false, 1, 2, 3, 4, 5]"
                                [options]="{ inputAttr: { 'aria-label': 'Header' } }"
                            ></dxi-item>
                            <dxi-item name="separator"></dxi-item>
                            <dxi-item name="color"></dxi-item>
                            <dxi-item name="background"></dxi-item>
                            <dxi-item name="separator"></dxi-item>
                            <dxi-item name="link"></dxi-item>
                            <dxi-item name="image"></dxi-item>
                            <dxi-item name="separator"></dxi-item>
                            <dxi-item name="clear"></dxi-item>
                            <dxi-item name="codeBlock"></dxi-item>
                            <dxi-item name="blockquote"></dxi-item>
                            <dxi-item name="separator"></dxi-item>
                            <dxi-item name="insertTable"></dxi-item>
                            <dxi-item name="deleteTable"></dxi-item>
                            <dxi-item name="insertRowAbove"></dxi-item>
                            <dxi-item name="insertRowBelow"></dxi-item>
                            <dxi-item name="deleteRow"></dxi-item>
                            <dxi-item name="insertColumnLeft"></dxi-item>
                            <dxi-item name="insertColumnRight"></dxi-item>
                            <dxi-item name="deleteColumn"></dxi-item>
                        </dxo-toolbar>
                        <dxo-media-resizing [enabled]="true"> </dxo-media-resizing>
                    </dx-html-editor>
                </div>
            </dxi-item>
            <dxi-item>
                <div *dxTemplate>
                    <dx-file-uploader 
                        uploadMode="instantly" 
                        [uploadUrl]="getFileUploadUrl()"
                        name="file"
                        [multiple]="false"
                    ></dx-file-uploader>
                </div>
            </dxi-item>
            <!--
                [uploadUrl]="'http://localhost:58765//Files/upload'"
                (onBeforeSend)="attachOnBeforeSend($event)"

            <dxi-item dataField="attachment" editorType="dxFileUploader" [editorOptions]="{
                uploadMode: 'instantly',
                uploadUrl: 'http://localhost:58765//Files/upload',
                onBeforeSend: attachOnBeforeSend,
                multiple: false
            }"></dxi-item>
            -->
            <!--
                https://supportcenter.devexpress.com/ticket/details/t1045414/dxfileupload-interceptor-middleware-is-not-called-when-i-upload-file-using-uploadurl
            -->
			<dxi-item itemType="group" colCount="3" >
					<dxi-item itemType="empty" [colSpan]="1"></dxi-item>
					<dxi-item itemType="button" [buttonOptions]="{text:'OK', type:'default', useSubmitBehavior:true, width:120}" horizontalAlignment="right"></dxi-item>
					<!--
					<dxi-item itemType="button" [buttonOptions]="{text:'Cancel', type:'normal', width:120, onClick: onCancel }"></dxi-item>
					-->
					<dxi-item itemType="button" [buttonOptions]="{text:'Cancel', type:'normal', width:120, onClick: this.onCancel}"></dxi-item>
			</dxi-item>
		</dx-form>
		<input type="hidden" name="ticket_id" value="{{formData.ticket_id}}" />
		<input type="hidden" name="contact_id" value="{{formData.contact_id}}" />
	</form>
</div>
<ng-template #NoTicketSelected>
	Please select a ticket first...
</ng-template>


<!--
<dx-html-editor height="250px">
    <dxo-toolbar [multiline]="true">
        <dxi-item name="undo"></dxi-item>
        <dxi-item name="redo"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item
            name="size"
            [acceptedValues]="['8pt', '10pt', '12pt', '14pt', '18pt', '24pt', '36pt']"
            [options]="{ inputAttr: { 'aria-label': 'Font size' } }"
        ></dxi-item>
        <dxi-item
            name="font"
            [acceptedValues]="[
                'Arial',
                'Courier New',
                'Georgia',
                'Impact',
                'Lucida Console',
                'Tahoma',
                'Times New Roman',
                'Verdana'
            ]"
            [options]="{ inputAttr: { 'aria-label': 'Font family' } }"
        ></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="bold"></dxi-item>
        <dxi-item name="italic"></dxi-item>
        <dxi-item name="strike"></dxi-item>
        <dxi-item name="underline"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="alignLeft"></dxi-item>
        <dxi-item name="alignCenter"></dxi-item>
        <dxi-item name="alignRight"></dxi-item>
        <dxi-item name="alignJustify"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="orderedList"></dxi-item>
        <dxi-item name="bulletList"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item
            name="header"
            [acceptedValues]="[false, 1, 2, 3, 4, 5]"
            [options]="{ inputAttr: { 'aria-label': 'Header' } }"
        ></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="color"></dxi-item>
        <dxi-item name="background"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="link"></dxi-item>
        <dxi-item name="image"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="clear"></dxi-item>
        <dxi-item name="codeBlock"></dxi-item>
        <dxi-item name="blockquote"></dxi-item>
        <dxi-item name="separator"></dxi-item>
        <dxi-item name="insertTable"></dxi-item>
        <dxi-item name="deleteTable"></dxi-item>
        <dxi-item name="insertRowAbove"></dxi-item>
        <dxi-item name="insertRowBelow"></dxi-item>
        <dxi-item name="deleteRow"></dxi-item>
        <dxi-item name="insertColumnLeft"></dxi-item>
        <dxi-item name="insertColumnRight"></dxi-item>
        <dxi-item name="deleteColumn"></dxi-item>
    </dxo-toolbar>
    <dxo-media-resizing [enabled]="true"> </dxo-media-resizing>
</dx-html-editor>
-->